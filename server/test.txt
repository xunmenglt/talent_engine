data: {"type": 0, "content": null}

data: {"type": 1, "content": null}

data: {"type": 11, "content": "开始制定计划"}

data: {"type": 2, "content": {"plan_list": ["请列出2023年绩效考核等级为A的北京总部员工"]}}

data: {"type": 11, "content": "问题骨架构建"}

data: {"type": 12, "content": {"question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]的[MASK]员工"}}

data: {"type": 11, "content": "相似问检索"}

data: {"type": 3, "content": {"similar_docs": [{"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A且在上海分公司工作的员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `KPI_GRADE` = 'A' AND `INSTITUTION_NAME` = '上海分公司';", "tables": ["T_HX_EMP_KPI"], "reference_question": "请列出2023年绩效考核等级为A的北京总部员工", "answer": null, "sql_exec_res": [{"ID": 3, "KPI_YEAR": 2023, "EMP_NO": "EMP003", "EMP_NAME": "李娜", "INSTITUTION_NO": "SH001", "INSTITUTION_NAME": "上海分公司", "JOB_NO": "POS003", "JOB_NAME": "产品经理", "SCORE": 92.3, "JOB_RANK": 1, "JOB_TOTAL": 1, "REGION_RANK": 5, "REGION_TOTAL": 2, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": "select _ from _ where _", "question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]且在[MASK]工作的员工"}, "embedding_field": "question"}, {"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年在北京总部担任兼职外语培训讲师且绩效考核等级为B+的员工", "query": "SELECT DISTINCT k.EMP_NO, k.EMP_NAME, k.INSTITUTION_NAME, p.PARTTIME_JOB, k.KPI_GRADE FROM T_HX_EMP_KPI k JOIN t_hx_parttime_job p ON CONVERT(k.EMP_NO USING utf8mb4) = CONVERT(p.emp_no USING utf8mb4) WHERE k.KPI_YEAR = 2023 AND k.INSTITUTION_NAME = '北京总部' AND k.KPI_GRADE = 'B+' AND p.PARTTIME_JOB LIKE '%外语培训讲师%';", "tables": ["T_HX_EMP_KPI", "t_hx_parttime_job"], "reference_question": "请列出在2023年国家级设计大赛获奖的深圳分公司员工", "answer": null, "sql_exec_res": [{"EMP_NO": "EMP002", "EMP_NAME": "王芳", "INSTITUTION_NAME": "北京总部", "PARTTIME_JOB": "外语培训讲师", "KPI_GRADE": "B+"}], "query_skeleton": "select distinct _ from _ on convert ( _ using utf8mb4 ) = convert ( _ using utf8mb4 ) where _ like _", "question_skeleton": "请列出[MASK]年在[MASK]担任[MASK]且绩效考核等级为[MASK]的员工"}, "embedding_field": "question"}, {"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年获得国家级奖项且绩效考核等级为A的员工", "query": "SELECT DISTINCT k.EMP_NO, k.EMP_NAME, k.INSTITUTION_NAME, k.JOB_NAME, k.KPI_GRADE FROM `T_HX_EMP_KPI` k JOIN `t_hx_join_activity` a ON CONVERT(k.EMP_NO USING utf8mb4) = CONVERT(a.emp_no USING utf8mb4) WHERE k.KPI_YEAR = 2023 AND k.KPI_GRADE = 'A' AND a.sponsor_level LIKE '%国家级%' AND a.is_reword = '1';", "tables": ["T_HX_EMP_KPI", "t_hx_join_activity"], "reference_question": "请列出2023年岗位排名第1的UI设计师", "answer": null, "sql_exec_res": [{"EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NAME": "北京总部", "JOB_NAME": "高级工程师", "KPI_GRADE": "A"}, {"EMP_NO": "EMP009", "EMP_NAME": "吴婷", "INSTITUTION_NAME": "杭州分公司", "JOB_NAME": "数据分析师", "KPI_GRADE": "A"}], "query_skeleton": "select distinct _ from _ on convert ( _ using utf8mb4 ) = convert ( _ using utf8mb4 ) where _ like _ and _", "question_skeleton": "请列出[MASK]年获得[MASK]奖项且绩效考核等级为[MASK]的员工"}, "embedding_field": "question"}, {"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A且岗位排名第一的员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `KPI_GRADE` = 'A' AND `JOB_RANK` = 1;", "tables": ["T_HX_EMP_KPI"], "reference_question": "请列出2023年绩效考核等级为A的北京总部员工", "answer": null, "sql_exec_res": [{"ID": 1, "KPI_YEAR": 2023, "EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NO": "BJ001", "INSTITUTION_NAME": "北京总部", "JOB_NO": "POS001", "JOB_NAME": "高级工程师", "SCORE": 95.5, "JOB_RANK": 1, "JOB_TOTAL": 2, "REGION_RANK": 3, "REGION_TOTAL": 4, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}, {"ID": 3, "KPI_YEAR": 2023, "EMP_NO": "EMP003", "EMP_NAME": "李娜", "INSTITUTION_NO": "SH001", "INSTITUTION_NAME": "上海分公司", "JOB_NO": "POS003", "JOB_NAME": "产品经理", "SCORE": 92.3, "JOB_RANK": 1, "JOB_TOTAL": 1, "REGION_RANK": 5, "REGION_TOTAL": 2, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}, {"ID": 9, "KPI_YEAR": 2023, "EMP_NO": "EMP009", "EMP_NAME": "吴婷", "INSTITUTION_NO": "HZ001", "INSTITUTION_NAME": "杭州分公司", "JOB_NO": "POS007", "JOB_NAME": "数据分析师", "SCORE": 94.1, "JOB_RANK": 1, "JOB_TOTAL": 1, "REGION_RANK": 4, "REGION_TOTAL": 1, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": "select _ from _ where _", "question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]且岗位排名[MASK]的员工"}, "embedding_field": "question"}, {"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A并且岗位为高级工程师的员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `JOB_NAME` = '高级工程师' AND `KPI_GRADE` = 'A';", "tables": ["T_HX_EMP_KPI"], "reference_question": "请列出2023年岗位排名第1的UI设计师", "answer": null, "sql_exec_res": [{"ID": 1, "KPI_YEAR": 2023, "EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NO": "BJ001", "INSTITUTION_NAME": "北京总部", "JOB_NO": "POS001", "JOB_NAME": "高级工程师", "SCORE": 95.5, "JOB_RANK": 1, "JOB_TOTAL": 2, "REGION_RANK": 3, "REGION_TOTAL": 4, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": "select _ from _ where _", "question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]并且岗位为[MASK]的员工"}, "embedding_field": "question"}]}}

data: {"type": 11, "content": "预生成SQL"}

: ping - 2025-05-14 09:44:46.399767

data: {"type": 4, "content": {"sql": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A的北京总部员工", "query": "SELECT * FROM T_HX_EMP_KPI WHERE KPI_YEAR = 2023 AND INSTITUTION_NAME = '北京总部' AND KPI_GRADE = 'A';", "tables": ["T_HX_EMP_KPI"], "reference_question": null, "answer": null, "sql_exec_res": [{"ID": 1, "KPI_YEAR": 2023, "EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NO": "BJ001", "INSTITUTION_NAME": "北京总部", "JOB_NO": "POS001", "JOB_NAME": "高级工程师", "SCORE": 95.5, "JOB_RANK": 1, "JOB_TOTAL": 2, "REGION_RANK": 3, "REGION_TOTAL": 4, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": null, "question_skeleton": null}}}

data: {"type": 11, "content": "SQL骨架相似度过滤"}

data: {"type": 5, "content": {"similar_docs": [{"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A且在上海分公司工作的员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `KPI_GRADE` = 'A' AND `INSTITUTION_NAME` = '上海分公司';", "tables": ["T_HX_EMP_KPI"], "reference_question": "请列出2023年绩效考核等级为A的北京总部员工", "answer": null, "sql_exec_res": [{"ID": 3, "KPI_YEAR": 2023, "EMP_NO": "EMP003", "EMP_NAME": "李娜", "INSTITUTION_NO": "SH001", "INSTITUTION_NAME": "上海分公司", "JOB_NO": "POS003", "JOB_NAME": "产品经理", "SCORE": 92.3, "JOB_RANK": 1, "JOB_TOTAL": 1, "REGION_RANK": 5, "REGION_TOTAL": 2, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": "select _ from _ where _", "question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]且在[MASK]工作的员工"}, "embedding_field": "question"}, {"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A且岗位排名第一的员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `KPI_GRADE` = 'A' AND `JOB_RANK` = 1;", "tables": ["T_HX_EMP_KPI"], "reference_question": "请列出2023年绩效考核等级为A的北京总部员工", "answer": null, "sql_exec_res": [{"ID": 1, "KPI_YEAR": 2023, "EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NO": "BJ001", "INSTITUTION_NAME": "北京总部", "JOB_NO": "POS001", "JOB_NAME": "高级工程师", "SCORE": 95.5, "JOB_RANK": 1, "JOB_TOTAL": 2, "REGION_RANK": 3, "REGION_TOTAL": 4, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}, {"ID": 3, "KPI_YEAR": 2023, "EMP_NO": "EMP003", "EMP_NAME": "李娜", "INSTITUTION_NO": "SH001", "INSTITUTION_NAME": "上海分公司", "JOB_NO": "POS003", "JOB_NAME": "产品经理", "SCORE": 92.3, "JOB_RANK": 1, "JOB_TOTAL": 1, "REGION_RANK": 5, "REGION_TOTAL": 2, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}, {"ID": 9, "KPI_YEAR": 2023, "EMP_NO": "EMP009", "EMP_NAME": "吴婷", "INSTITUTION_NO": "HZ001", "INSTITUTION_NAME": "杭州分公司", "JOB_NO": "POS007", "JOB_NAME": "数据分析师", "SCORE": 94.1, "JOB_RANK": 1, "JOB_TOTAL": 1, "REGION_RANK": 4, "REGION_TOTAL": 1, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": "select _ from _ where _", "question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]且岗位排名[MASK]的员工"}, "embedding_field": "question"}, {"file_path": "/opt/data/private/liuteng/code/szrcb/talent_engine/data/knowledge_base/talent_engine_deepseek/content/examples_deepseek.sqldata", "sql_data": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A并且岗位为高级工程师的员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `JOB_NAME` = '高级工程师' AND `KPI_GRADE` = 'A';", "tables": ["T_HX_EMP_KPI"], "reference_question": "请列出2023年岗位排名第1的UI设计师", "answer": null, "sql_exec_res": [{"ID": 1, "KPI_YEAR": 2023, "EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NO": "BJ001", "INSTITUTION_NAME": "北京总部", "JOB_NO": "POS001", "JOB_NAME": "高级工程师", "SCORE": 95.5, "JOB_RANK": 1, "JOB_TOTAL": 2, "REGION_RANK": 3, "REGION_TOTAL": 4, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": "select _ from _ where _", "question_skeleton": "请列出[MASK]年绩效考核等级为[MASK]并且岗位为[MASK]的员工"}, "embedding_field": "question"}]}}

data: {"type": 11, "content": "真实SQL构建"}

: ping - 2025-05-14 09:45:01.399900

data: {"type": 6, "content": {"sql": {"schamea": "CREATE TABLE `T_HX_EMP_KPI` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键ID',\n  `KPI_YEAR` int DEFAULT NULL COMMENT '考核年度(建议改为INT4足够)',\n  `EMP_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工姓名',\n  `INSTITUTION_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构编号',\n  `INSTITUTION_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '机构名称',\n  `JOB_NO` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位编号',\n  `JOB_NAME` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '岗位名称',\n  `SCORE` decimal(6,2) DEFAULT NULL COMMENT 'KPI得分(保留2位小数)',\n  `JOB_RANK` int DEFAULT NULL COMMENT '岗位排名',\n  `JOB_TOTAL` int DEFAULT NULL COMMENT '岗位总人数',\n  `REGION_RANK` int DEFAULT NULL COMMENT '区域排名',\n  `REGION_TOTAL` int DEFAULT NULL COMMENT '区域总人数',\n  `REMARK` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注信息',\n  `CREATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录创建人',\n  `UPDATE_USER` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '记录修改人(与CREATE_USER长度一致)',\n  `KPI_GRADE` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '绩效考核等级(A/B/C等)',\n  `CREATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '记录创建时间',\n  `UPDATE_TIME` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '记录更新时间',\n  PRIMARY KEY (`ID`),\n  KEY `idx_kpi_year_emp` (`KPI_YEAR`,`EMP_NO`),\n  KEY `idx_institution_year` (`INSTITUTION_NO`,`KPI_YEAR`),\n  KEY `idx_kpi_grade` (`KPI_GRADE`),\n  KEY `idx_score` (`SCORE`),\n  KEY `idx_job_rank` (`JOB_RANK`),\n  KEY `idx_region_rank` (`REGION_RANK`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工绩效考核表'\n\nCREATE TABLE `T_HX_EMP_SPECIAL_SKILL` (\n  `ID` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `EMP_NO` varchar(20) NOT NULL COMMENT '员工档案号',\n  `EMP_NAME` varchar(50) NOT NULL COMMENT '员工姓名',\n  `SKILL_TYPE` varchar(2) NOT NULL COMMENT '特长类别',\n  `SKILL_NAME` varchar(100) NOT NULL COMMENT '特长项目',\n  `SKILL_LEVEL` varchar(30) DEFAULT NULL COMMENT '特长级别/水平',\n  `PERFORM_ORG` varchar(100) DEFAULT NULL COMMENT '认定单位',\n  `BZ` varchar(30) DEFAULT NULL COMMENT '备注',\n  `CREATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `CREATE_USER` varchar(20) NOT NULL COMMENT '创建人',\n  `UPDATE_TIME` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',\n  `UPDATE_USER` varchar(20) NOT NULL COMMENT '修改人',\n  PRIMARY KEY (`ID`),\n  KEY `idx_emp_no` (`EMP_NO`),\n  KEY `idx_skill_type` (`SKILL_TYPE`),\n  KEY `idx_skill_name` (`SKILL_NAME`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工个人特长表'\n\nCREATE TABLE `t_hx_join_activity` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '主键ID',\n  `emp_no` varchar(20) NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) NOT NULL COMMENT '员工姓名',\n  `activity_type` varchar(3) DEFAULT NULL COMMENT '活动类型',\n  `activity_name` varchar(100) DEFAULT NULL COMMENT '活动/项目/特长名称',\n  `activity_group` varchar(3) DEFAULT NULL COMMENT '活动分类',\n  `activity_level` varchar(3) DEFAULT NULL COMMENT '活动星级',\n  `sponsor` varchar(100) DEFAULT NULL COMMENT '主办单位名称',\n  `sponsor_level` varchar(30) NOT NULL COMMENT '主办单位级别',\n  `activity_start_time` datetime NOT NULL COMMENT '举办时间起',\n  `activity_end_time` datetime NOT NULL COMMENT '举办时间止',\n  `is_reword` varchar(3) NOT NULL COMMENT '是否获奖(1是/0否)',\n  `reword_level` varchar(30) NOT NULL COMMENT '表彰奖励类别',\n  `reword_desc` varchar(300) NOT NULL COMMENT '获奖情况',\n  `perform_desc` varchar(300) DEFAULT NULL COMMENT '表现评价',\n  `perform_org` varchar(100) NOT NULL COMMENT '评价单位',\n  `bz` varchar(300) DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_activity_type` (`activity_type`),\n  KEY `idx_activity_name` (`activity_name`),\n  KEY `idx_activity_time` (`activity_start_time`,`activity_end_time`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='员工参与活动记录表'\n\nCREATE TABLE `t_hx_parttime_job` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `emp_no` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '员工姓名',\n  `parttime_job` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职岗位',\n  `parttime_address` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '兼职单位',\n  `parttime_time` datetime DEFAULT NULL COMMENT '兼职时间',\n  `bz` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `create_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '创建人',\n  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  `update_user` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '更新人',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_parttime_job` (`parttime_job`),\n  KEY `idx_parttime_address` (`parttime_address`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工岗位兼职记录表'\n\nCREATE TABLE `t_hx_test_evaluate` (\n  `id` bigint NOT NULL AUTO_INCREMENT COMMENT '自增主键',\n  `evaluate_type` varchar(5) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察类型',\n  `emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人档案号',\n  `emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '被考察人姓名',\n  `evaluate_time` datetime DEFAULT NULL COMMENT '考察时间',\n  `evaluate_suggest` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评建议',\n  `evaluate_result` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考评结果',\n  `super_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '上级评价',\n  `lever_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '平级评价',\n  `emp_evaluate` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '员工评价',\n  `evaluate_emp_no` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员档案号',\n  `evaluate_emp_name` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '考察人员姓名',\n  `other_msg` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他信息',\n  `remark` varchar(300) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',\n  `create_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '创建人',\n  `update_user` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '更新人',\n  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',\n  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',\n  PRIMARY KEY (`id`),\n  KEY `idx_emp_no` (`emp_no`),\n  KEY `idx_evaluate_time` (`evaluate_time`),\n  KEY `idx_evaluate_emp` (`evaluate_emp_no`),\n  KEY `idx_evaluate_type` (`evaluate_type`)\n) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='员工考察考评表'", "question": "请列出2023年绩效考核等级为A的北京总部员工", "query": "SELECT * FROM `T_HX_EMP_KPI` WHERE `KPI_YEAR` = 2023 AND `KPI_GRADE` = 'A' AND `INSTITUTION_NAME` = '北京总部';", "tables": ["T_HX_EMP_KPI"], "reference_question": null, "answer": null, "sql_exec_res": [{"ID": 1, "KPI_YEAR": 2023, "EMP_NO": "EMP001", "EMP_NAME": "张伟", "INSTITUTION_NO": "BJ001", "INSTITUTION_NAME": "北京总部", "JOB_NO": "POS001", "JOB_NAME": "高级工程师", "SCORE": 95.5, "JOB_RANK": 1, "JOB_TOTAL": 2, "REGION_RANK": 3, "REGION_TOTAL": 4, "REMARK": null, "CREATE_USER": "admin", "UPDATE_USER": "admin", "KPI_GRADE": "A", "CREATE_TIME": "2025-05-12T19:21:56", "UPDATE_TIME": "2025-05-12T19:22:45"}], "query_skeleton": null, "question_skeleton": null}}}

data: {"type": 11, "content": "SQL语句校验"}

data: {"type": 9, "content": {"sql": "SELECT * FROM T_HX_EMP_KPI WHERE KPI_YEAR = 2023 AND INSTITUTION_NAME = '北京总部' AND KPI_GRADE = 'A';", "exec_res": "| ID | KPI_YEAR | EMP_NO | EMP_NAME | INSTITUTION_NO | INSTITUTION_NAME | JOB_NO | JOB_NAME | SCORE | JOB_RANK | JOB_TOTAL | REGION_RANK | REGION_TOTAL | REMARK | CREATE_USER | UPDATE_USER | KPI_GRADE | CREATE_TIME | UPDATE_TIME |\n| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |\n| 1 | 2023 | EMP001 | 张伟 | BJ001 | 北京总部 | POS001 | 高级工程师 | 95.50 | 1 | 2 | 3 | 4 | None | admin | admin | A | 2025-05-12 19:21:56 | 2025-05-12 19:22:45 |"}}

data: {"type": 10, "content": {"final_answer": "", "chunk": ""}}

data: {"type": 10, "content": {"final_answer": "202", "chunk": "202"}}

data: {"type": 10, "content": {"final_answer": "2023", "chunk": "3"}}

data: {"type": 10, "content": {"final_answer": "2023年", "chunk": "年"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核", "chunk": "绩效考核"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级", "chunk": "等级"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为", "chunk": "为"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A", "chunk": "A"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的", "chunk": "的"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京", "chunk": "北京"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部", "chunk": "总部"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工", "chunk": "员工"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是", "chunk": "是"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张", "chunk": "张"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟", "chunk": "伟"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（", "chunk": "（"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工", "chunk": "员工"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案", "chunk": "档案"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号", "chunk": "号"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：", "chunk": "："}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP", "chunk": "EMP"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001", "chunk": "001"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），", "chunk": "），"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位", "chunk": "岗位"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为", "chunk": "为"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级", "chunk": "高级"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师", "chunk": "工程师"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，", "chunk": "，"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得", "chunk": "得"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为", "chunk": "分为"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为95", "chunk": "95"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为95.", "chunk": "."}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为95.50", "chunk": "50"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为95.50分", "chunk": "分"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为95.50分。", "chunk": "。"}}

data: {"type": 10, "content": {"final_answer": "2023年绩效考核等级为A的北京总部员工是张伟（员工档案号：EMP001），岗位为高级工程师，得分为95.50分。", "chunk": ""}}

data: {"type": -1, "content": null}